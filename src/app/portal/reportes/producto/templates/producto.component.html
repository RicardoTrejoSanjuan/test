<header>
</header>
<div class="row rowSubMenuHeader">
    <div class="col-xs-12  rowSubMenuHeader main-general">
        <div class="row">
            <div class="col-xs-3 col-sm-2 col-md-2 row middle-xs center-xs">
            </div>
            <div class="col-xs-9 col-sm-10 col-md-10 row middle-xs">
                <div class="row col-xs-12 pathNavegacion btn-regresar">
                    <a href="#/dashboard" class="colorBread"> Home </a>
                    <a class="colorBread"> / </a>
                    <a href="#/reportes" class="colorBread"> Reportes</a>
                    <a class="colorBread"> / </a>
                    <a class="colorBread"> Producto</a>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-3 col-sm-2 col-md-2  boxMenuIzquierdo reset-padding">
                <ul class="nav">
                    <li class="btnMenuLateral" routerLink="{{item.url}}" routerLinkActive="active" *ngFor="let item of menuLateral">
                        <div class="imgBtnMenuLateral {{item.claseIcono}}">
                            <i class="{{item.imagen}}"></i>
                        </div>
                        <div class="desBtnMenuLateral {{item.claseFondo}}">
                            {{item.textoMenu}}
                        </div>
                    </li>
                </ul>
            </div>

            <div class="row col-xs-9 col-sm-10 col-md-10 center-xs">
                <div class="row col-xs-12 center-xs row-menu-general">
                    <div class="col-xs-12">
                        <div class="card">
                            <div class="card-header naranja-01-ico tBlanco">
                                <div class="row">
                                    <div class="col-xs-9 reset-padding">
                                        <i class="icon-shopping-bag margin-left05em"></i>Producto
                                    </div>
                                    <div class="col-xs-3 end-xs containet-btn-regresar" *ngIf="oFH.btnDownload">
                                        <a class="btn btn-sm btn-success" style="margin-bottom: -3px;" (click)="openForm()">
                                            <i class="icon-file-text2 margin-left05em icon-btn-headers"></i> Exportar Gráfica
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="row padding-select-box">
                                <div class="box1" >
                                    <div class="mt">Productos</div>
                                </div>
                                <div class="box1">
                                    <div class="mt">Instituciones</div>
                                </div>
                            </div>
                            <div class="row padding-select-box">
                                <div class="box1">
                                    <div class="mt">
                                        <select class="select-producto" [(ngModel)]="idProducto" (change)="init(true)">
                                            <option value="">Selecciona</option>
                                            <option *ngFor="let producto of productos" value="{{producto.idProducto}}">{{ producto.productos }}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="box1">
                                    <div class="mt">
                                        <mat-input-container>
                                            <input type="text" class="search-input" [matAutocomplete]="auto" [formControl]="institucionCtrl">
                                        </mat-input-container>

                                        <mat-autocomplete #auto="matAutocomplete">
                                            <mat-option *ngFor="let institucion of listaInstituciones | async" [value]="institucion.name" (onSelectionChange)="getDispersionInstitucion(institucion)">
                                                {{ institucion.name }}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </div>
                                </div>
                            </div>



                            <!-- <div class="card-block row" *ngIf="oFH.dataVisible"> -->
                            <div class="card-block row">
                                <div class="col-xs-12 reset-padding">
                                    <div class="card">
                                        <!--<select>
                                        <option value="" selected disabled>Seleccione</option>
                                        <option value="176">Pruebas big</option>
                                    </select>-->
                                    </div>
                                </div>
                                <!-- col-xs-12 col-sm-3 col-md-3 col-lg-3 -->
                                <div class="col-xs-12 reset-padding">
                                    <div class="row center-xs" id="second-content">
                                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                            <div class="box" >
                                                <div class="card-block-titulo">
                                                    <img src="{{load_static}}/images/img/dispersiones.svg">
                                                    <label class="titulo-card">DISPERSIONES</label>
                                                </div>
                                                <div class="flex-container">
                                                    <div class="flex-itemF">
                                                        <div class="row fechas">
                                                            Primera
                                                        </div>
                                                        <div class="row fechasD">
                                                            {{objDispersiones.datosFechaPrimera}}
                                                        </div>
                                                        <div class="row fechas">
                                                            Última
                                                        </div>
                                                        <div class="row fechasD">
                                                            {{objDispersiones.datosFechaFinal}}
                                                        </div>
                                                        <div class="row">
                                                            <table class="dispersion">
                                                                <thead>
                                                                    <tr>
                                                                        <th></th>
                                                                        <th class="fechas">Todas</th>
                                                                        <th class="fechas">Última</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="fechas">$ Promedio</td>
                                                                        <td class="fechasI">{{objDispersiones.todasPromedio}}</td>
                                                                        <td class="fechasI">{{objDispersiones.ultimaPromedio}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="fechas">$ Mínimo</td>
                                                                        <td class="fechasI">{{objDispersiones.todasMinimo}}</td>
                                                                        <td class="fechasI">{{objDispersiones.ultimaMinimo}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="fechas">$ Máximo</td>
                                                                        <td class="fechasI">{{objDispersiones.todasMaximo}}</td>
                                                                        <td class="fechasI">{{objDispersiones.ultimaMaximo}}</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="flex-itemF">
                                                        <table class="barras">
                                                            <tbody>
                                                                <tr>
                                                                    <td>
                                                                        <div class="humanos">
                                                                            <span id="th" class="texto-naranja">Con Dispersión</span>
                                                                            <div class="vcol naranja" [style.height]="objDispersiones.porcentajeConDispersion+'%'"></div>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div class="humanos">
                                                                            <span id="th" class="texto-verde">Sin Dispersión</span>
                                                                            <div class="vcol verde1" [style.height]="objDispersiones.porcentajeSinDispersion+'%'"></div>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td><span class="big">{{objDispersiones.porcentajeConDispersion}}%</span></td>
                                                                    <td><span class="big">{{objDispersiones.porcentajeSinDispersion}}%</span></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                            <div class="box" >
                                                <div class="card-block-titulo">
                                                    <img src="{{load_static}}/images/img/estatusdecuenta.svg">
                                                    <label class="titulo-card">ESTATUS DE CUENTAS</label>
                                                    <span id="cuentas">#Cuentas</span>
                                                </div>
                                                <div class="flex-containerl">
                                                    <div class="flex-itemFR">
                                                       Completo
                                                    </div>
                                                    <div class="flex-itemF">
                                                        <div class="progress">
                                                            <div class="azul" [style.width]="objRepInstitucion.porcentajeCompleto+'%'">
                                                                <span class="porcentaje">
                                                                    {{ objRepInstitucion.porcentajeCompleto }}%
                                                                </span>
                                                            </div>
                                                        </div><span>{{objRepInstitucion.qtyCompleto}}</span>
                                                    </div>
                                                </div>
                                                <div class="flex-containerl">
                                                    <div class="flex-itemFR">
                                                        Con Error
                                                    </div>
                                                    <div class="flex-itemF">
                                                        <div class="progress">
                                                            <div class="rojo" [style.width]="objRepInstitucion.porcentajeConError+'%'">
                                                                 <span class="porcentaje">
                                                                    {{ objRepInstitucion.porcentajeConError }}%
                                                                </span>
                                                            </div>
                                                        </div><span>{{objRepInstitucion.qtyConError}}</span>
                                                    </div>
                                                </div>
                                                <div class="flex-containerl">
                                                    <div class="flex-itemFR">
                                                        En Proceso IVR
                                                    </div>
                                                    <div class="flex-itemF">
                                                        <div class="progress">
                                                            <div class="naranja" [style.width]="objRepInstitucion.porcentajeEnProcesoIVR+'%'">
                                                                 <span class="porcentaje">
                                                                    {{ objRepInstitucion.porcentajeEnProcesoIVR }}%
                                                                </span>
                                                            </div>
                                                        </div><span>{{objRepInstitucion.qtyEnProcesoIVR}}</span>
                                                    </div>
                                                </div>
                                                <div class="flex-containerl">
                                                    <div class="flex-itemFR">
                                                        En Revision
                                                    </div>
                                                    <div class="flex-itemF">
                                                        <div class="progress">
                                                            <div class="morado" [style.width]="objRepInstitucion.porcentajeEnRevision+'%'">
                                                                 <span class="porcentaje">
                                                                    {{ objRepInstitucion.porcentajeEnRevision }}%
                                                                </span>
                                                            </div>
                                                        </div><span>{{objRepInstitucion.qtyEnRevision}}</span>
                                                    </div>
                                                </div>
                                                <div class="flex-containerl">
                                                    <div class="flex-itemFR">
                                                        En Revision MC
                                                    </div>
                                                    <div class="flex-itemF">
                                                        <div class="progress">
                                                            <div class="verde" [style.width]="objRepInstitucion.porcentajeEnRevisionMC+'%'">
                                                                 <span class="porcentaje">
                                                                    {{ objRepInstitucion.porcentajeEnRevisionMC }}%
                                                                </span>
                                                            </div>
                                                        </div><span>{{objRepInstitucion.qtyEnRevisionMC}}</span>
                                                    </div>
                                                </div>
                                                <div class="flex-containerl">
                                                    <div class="flex-itemFR">
                                                        Inactivo
                                                    </div>
                                                    <div class="flex-itemF">
                                                        <div class="progress">
                                                            <div class="azul" [style.width]="objRepInstitucion.porcentajeInactivo+'%'">
                                                                 <span class="porcentaje">
                                                                    {{ objRepInstitucion.porcentajeInactivo }}%
                                                                </span>
                                                            </div>
                                                        </div><span>{{objRepInstitucion.qtyInactivo}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 reset-padding">
                                    <div class="flex-container">
                                        <div class="flex-item">
                                            <div class="card-block-titulo">
                                                <img src="{{load_static}}/images/img/edad.svg">
                                                <label class="titulo-card">Edad</label>
                                            </div>
                                            <div class="circle-wrapper">
                                                <p>PROMEDIO</p>
                                                <p class="circle-cantidad">{{objRepInstitucion.datosEdadEdadPromedio}}</p>
                                                <p>AÑOS</p>
                                            </div>
                                            <div class="main-content">
                                                <div class="style1"></div>
                                                <div class="ccl">
                                                    <div class="cl">Mínimo</div>
                                                    <div class="cl1">{{objRepInstitucion.datosEdadEdadMinima}}</div>
                                                </div>
                                                <div class="style1"></div>
                                                <div class="ccl">
                                                    <div class="cl">Máximo</div>
                                                    <div class="cl1">{{objRepInstitucion.datosEdadEdadMaxima}}</div>
                                                </div>
                                                <div class="style1"></div>
                                                <div class="ccl">
                                                    <div class="cl">Desv</div>
                                                    <div class="cl1">{{objRepInstitucion.datosEdadEdadDesviacion}}</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex-item">
                                            <div class="card-block-titulo">
                                                <img src="{{load_static}}/images/img/genero.svg">
                                                <label class="titulo-card">Género</label>
                                            </div>
                                            <div class="flex-itemF">
                                                <table class="barras">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <div class="humanos">
                                                                    <div class="vcol1 mujer" [style.height]="objRepInstitucion.datosGeneroPorcentajeMujeres+'%'"></div>
                                                                    <img id="img-genero" src="{{load_static}}/images/img/mujer.svg">
                                                                </div>

                                                            </td>
                                                            <td>
                                                                <div class="humanos">
                                                                    <div class="vcol1 hombre" [style.height]="objRepInstitucion.datosGeneroPorcentajeHombres+'%'"></div>
                                                                    <img id="img-genero" src="{{load_static}}/images/img/hombre.svg">
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><span class="big">{{objRepInstitucion.datosGeneroPorcentajeMujeres}}%</span></td>
                                                            <td><span class="big">{{objRepInstitucion.datosGeneroPorcentajeHombres}}%</span></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="flex-item">
                                            <div class="card-block-titulo">
                                                <img src="{{load_static}}/images/img/telefono.svg">
                                                <label class="titulo-card">¿Con Teléfono?</label>
                                            </div>
                                            <div id="progress">
                                                <div class="cirucular-progreso">
                                                    <div class="circular-progress css3" id="circle_1"></div>
                                                    <div class="circular-progress css3-two"></div>
                                                    <div class="circular-progress css3-three"></div>
                                                    <div class="circular-progress"></div>
                                                </div>
                                            </div>
                                            <div class="circle-main-content">
                                                <div class="style1"></div>
                                                <div class="elemets">
                                                    <span class="bullet"></span> {{objRepInstitucion.datosTelefEmplConTelefono}} personas
                                                    <span id="rigth">{{objRepInstitucion.datosTelefEmplConTelefonoPorcentaje}}%</span>
                                                </div>
                                                <div class="style1"></div>
                                                <div class="elemets">
                                                    <span class="bulletRojo"></span> {{objRepInstitucion.datosTelefEmplSinTelefono}} personas
                                                    <span id="rigth">{{objRepInstitucion.datosTelefEmplSinTelefonoPorcentaje}}%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex-item">
                                            <div class="card-block-titulo">
                                                <img src="{{load_static}}/images/img/buro.svg">
                                                <label class="titulo-card">¿Autorizó consulta buró?</label>
                                            </div>
                                            <div class="cirucular-progreso">
                                                <div class="circular-progress css31"></div>
                                                <div class="circular-progress css3-two1" id="circle_2"></div>
                                                <div class="circular-progress css3-three1"></div>
                                                <div class="circular-progress css3-four1"></div>
                                            </div>
                                            <div class="circle-main-content">
                                                <div class="style1"></div>
                                                <div class="elemets">
                                                    <span class="bulletVerde"></span> {{objRepInstitucion.datosBuroConFirma}} personas
                                                    <span id="rigth">{{objRepInstitucion.datosBuroConFirmaP}}%</span>
                                                </div>
                                                <div class="style1"></div>
                                                <div class="elemets">
                                                    <span class="bulletAmarillo"></span> {{objRepInstitucion.datosBuroSinFirma}} personas
                                                    <span id="rigth">{{objRepInstitucion.datosBuroSinFirmaP}}%</span>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="flex-item">
                                            <div class="card-block-titulo">
                                                <img src="{{load_static}}/images/img/credito.svg">
                                                <label class="titulo-card">Candidatos a crédito</label>
                                            </div>
                                            <div class="cirucular-progreso">
                                                <div class="circular-progress css32"></div>
                                                <div class="circular-progress css3-two2"></div>
                                                <div class="circular-progress css3-three2" id="circle_3"></div>
                                                <div class="circular-progress css3-four2"></div>
                                            </div>
                                            <div class="circle-main-content">
                                                <div class="style1"></div>
                                                <div class="elemets">
                                                    <span class="bulletVerde"></span> {{objRepInstitucion.datosCreditoCandidatosCredito}} personas
                                                    <span id="rigth">{{objRepInstitucion.datosCreditoCandidatosCreditoP}}%</span>
                                                </div>
                                                <div class="style1"></div>
                                                <div class="elemets">
                                                    <span class="bulletRojo"></span> {{objRepInstitucion.datosCreditoCandidatosCredito}} persona
                                                    <span id="rigth">{{objRepInstitucion.datosCreditoNoCandidatosCreditoP}}%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Nueva Grafica -->
                                <div class="row col-xs-12 reset-padding box graph-linear" *ngIf="oFH.graphVisible">
                                    <div class="col-xs-12">
                                        <grafica-highchart></grafica-highchart>
                                    </div>
                                </div>
                                <!-- .Nueva Grafica -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<app-dialog [(visible)]="oFH.modalVisible">
    <div class="modal-content">
        <div class="modal-header">
            <button aria-hidden="true" class="close" data-dismiss="modal" type="button"
                    (click)="closeForm()">
                <span aria-hidden="true" class="icon-cross"></span>
            </button>
            <h4 class="modal-title custom_align" id="Heading">Elija rango de fechas</h4>
        </div>
        <div class="modal-body">
            <div class="card-block">
                <form [formGroup]="formulario"  (ngSubmit)="descargarExcel(formulario.value)" >
                    <fieldset class="form-group">
                        <label>Seleccione</label>
                        <div class="input-group">
                            <span class="input-group-addon alignJustifyCenter">
                                <i class="icon-user icon-formulario"></i>
                            </span>
                            <select name="" id="" class="form-control" (change)="habilitarFecha()" formControlName="parametro">
                                <option value=null>Seleccione</option>
                                <option value="0">HISTORICO</option>
                                <option value="1">RANGO FECHAS</option>
                            </select>
                        </div>
                        <control-messages [control]="formulario.controls.parametro"></control-messages>
                    </fieldset>
                    <fieldset class="form-group" *ngIf="oFH.bandFechas">
                        <label>Fecha Inicio</label>
                        <div class="input-group">
                            <span class="input-group-addon alignJustifyCenter">
                                <i class="icon-user icon-formulario"></i>
                            </span>
                            <input class="form-control" type="date" name="txtNombre" class="form-control col-xs-3 col-sm-3 col-md-3 center-xs" formControlName="fechaInicio" (change)="asignarFecha()">
                        </div>
                        <control-messages [control]="formulario.controls.fechaInicio"></control-messages>
                    </fieldset>
                    <fieldset class="form-group" *ngIf="oFH.bandFechas && oFH.fechaIn">
                            <label>Fecha Final</label>
                        <div class="input-group">
                            <span class="input-group-addon alignJustifyCenter">
                                <i class="icon-user icon-formulario"></i>
                            </span>
                            <input class="form-control" type="date" name="txtNombre" min="{{minFecha}}" class="form-control col-xs-3 col-sm-3 col-md-3 center-xs" formControlName="fechaFin">
                        </div>
                        <control-messages [control]="formulario.controls.fechaFin"></control-messages>
                    </fieldset>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success" name="btnGuardar" id="guardar"  >
                            <i class="icon-floppy-disk icoBntModal"></i>&nbsp; Aceptar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</app-dialog>
<simple-notifications [options]="optionsNotifications"></simple-notifications>
<div *ngIf="activateLoading" class="Loading">
    <div class="loader"></div>
</div>
