<header></header>
<div class="row rowSubMenuHeader">
    <div class="col-xs-12  rowSubMenuHeader main-general">

        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 row middle-xs">
                <div class="row col-xs-12 pathNavegacion btn-regresar">
                    <a routerLink="{{item.pahtUrl}}" class="{{item.class}}" *ngFor="let item of menuNavigation">
                        {{item.name}} </a>
                </div>
            </div>
        </div>
        <div class="row rowSubMenuHeader">
            <div class="col-xs-9 col-sm-12 col-md-12 row center-xs">
                <div class="row col-xs-12 center-xs row-menu-general">
                    <div class="col-xs-12">
                        <div class="card">
                            <div class="card-header" id="verde">
                                <div class="row">
                                    <div class="col-xs-9 reset-padding">
                                        <i class="icon-table2 margin-left05em"></i>Configuración de ofertas
                                    </div>
                                    <div class="col-xs-3 end-xs reset-padding btnFormularios">
                                        <a (click)="openForm()" class="btn btn-sm btn-success"> <i
                                                class="icon-plus margin-left05em icon-btn-headers"></i> Nuevo</a>
                                    </div>
                                </div>
                            </div>
                            <div class="card-block">
                                <div class="scroll col-xs-12">
                                    <table class="table">
                                        <thead>
                                            <th>{{comercio.nombre}}</th>
                                        </thead>
                                        <tr *ngFor="let item of pagedItems" (click)="asignarOferta(item)">
                                            <td>{{item.descripcionOferta}}</td>
                                        </tr>
                                        <tr *ngIf="listaOfertas===null">
                                            <td>No existen ofertas para el comercio</td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="container">
                                    <div class="text-end">
                                        <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
                                            <li [ngClass]="{disabled:pager.currentPage === 1}">
                                                <a (click)="setPage(1,pager.rango,pager.total)">Inicio</a>
                                            </li>
                                            <li [ngClass]="{disabled:pager.currentPage === 1}">
                                                <a (click)="setPage(pager.currentPage - 1,pager.rango,pager.total)">Anterior</a>
                                            </li>
                                            <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
                                                <a (click)="setPage(page,pager.rango,pager.total)">{{page}}</a>
                                            </li>
                                            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                                                <a (click)="setPage(pager.currentPage + 1,pager.rango,pager.total)">Siguiente</a>
                                            </li>
                                            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                                                <a (click)="setPage(pager.totalPages,pager.rango,pager.total)">Último</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <app-dialog [(visible)]="modalFormulario" >
                                    <div class="modal-content"  >
                                        <div class="modal-header">
                                            <button aria-hidden="true" class="close" data-dismiss="modal" type="button"
                                                    (click)="closeForm()">
                                                <span aria-hidden="true" class="icon-cross"></span>
                                            </button>
                                            <h4 class="modal-title custom_align" id="Heading">Alta de Oferta</h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="card-block">
                                                <form [formGroup]="formulario" (ngSubmit)="guardarDispersion()" novalidate>
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            <fieldset class="form-group">
                                                                <label>Oferta</label>
                                                                <div class="input-group">
                                                                    <span class="input-group-addon alignJustifyCenter">
                                                                        <i class="icon-link icon-formulario"></i>
                                                                    </span>
                                                                    <input class="form-control ng-untouched ng-pristine ng-invalid" type="text">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.descripcionOferta"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            <fieldset class="form-group">
                                                                <label>Dias Vigencia</label>
                                                                <div class="input-group">
                                                                    <span class="input-group-addon alignJustifyCenter">
                                                                        <i class="icon-link icon-formulario"></i>
                                                                    </span>
                                                                    <input class="form-control ng-untouched ng-pristine ng-invalid" type="text">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.diasVigencia"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-6">
                                                            <fieldset class="form-group">
                                                                <label>Inicio Vigencia</label>
                                                                <div class="input-group">
                                                                    <span class="input-group-addon alignJustifyCenter">
                                                                        <i class="icon-link icon-formulario"></i>
                                                                    </span>
                                                                    <input class="form-control ng-untouched ng-pristine ng-invalid" type="text">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.inicioVigencia"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                        <div class="col-xs-6">
                                                            <fieldset class="form-group">
                                                                <label>Final Vigencia</label>
                                                                <div class="input-group">
                                                                    <span class="input-group-addon alignJustifyCenter">
                                                                        <i class="icon-link icon-formulario"></i>
                                                                    </span>
                                                                    <input class="form-control ng-untouched ng-pristine ng-invalid" type="text">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.finVigencia"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            <fieldset class="form-group">
                                                                <label>Tipo de Oferta</label>
                                                                <div class="input-group">
                                                                        <span class="input-group-addon alignJustifyCenter">
                                                                            <i class="icon-link icon-formulario"></i>
                                                                        </span>
                                                                    <input class="form-control ng-untouched ng-pristine ng-invalid" type="text">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.idTipoOferta"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-6">
                                                            <fieldset class="form-group">
                                                                <label>Valor Oferta</label>
                                                                <div class="input-group">
                                                                    <span class="input-group-addon alignJustifyCenter">
                                                                        <i class="icon-link icon-formulario"></i>
                                                                    </span>
                                                                    <input class="form-control ng-untouched ng-pristine ng-invalid" type="text">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.valorOferta"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                        <div class="col-xs-6">
                                                            <fieldset class="form-group">
                                                                <label>Número de Cupones a emitir</label>
                                                                <div class="input-group">
                                                                    <span class="input-group-addon alignJustifyCenter">
                                                                        <i class="icon-link icon-formulario"></i>
                                                                    </span>
                                                                    <input class="form-control ng-untouched ng-pristine ng-invalid" type="text">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.numCupones"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            <fieldset class="form-group">
                                                                <label>Tipo de Emisión</label>
                                                                <div class="input-group">
                                                                        <span class="input-group-addon alignJustifyCenter">
                                                                            <i class="icon-link icon-formulario"></i>
                                                                        </span>
                                                                    <input class="form-control ng-untouched ng-pristine ng-invalid" type="text">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.idTipoEmision"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                    <div class="row modal-footer">
                                                        <div class="row col-xs-12">
                                                            <div class="col-xs-6">
                                                                <fieldset class="form-group">
                                                                    <label>Vencimiento por Uso</label>
                                                                    <div class="input-group">
                                                                            <span class="input-group-addon alignJustifyCenter">
                                                                                <i class="icon-link icon-formulario"></i>
                                                                            </span>
                                                                        <input type="checkbox">
                                                                    </div>
                                                                    <control-messages [control]="formulario.controls.uso"></control-messages>
                                                                </fieldset>
                                                            </div>
                                                            <div class="col-xs-6">
                                                                <fieldset class="form-group">
                                                                    <label>Vencimiento por Vigencia</label>
                                                                    <div class="input-group">
                                                                            <span class="input-group-addon alignJustifyCenter">
                                                                                <i class="icon-link icon-formulario"></i>
                                                                            </span>
                                                                        <input type="checkbox">
                                                                    </div>
                                                                    <control-messages [control]="formulario.controls.vencimientoVigencia"></control-messages>
                                                                </fieldset>
                                                            </div>
                                                        </div>
                                                        <div class="row col-xs-12">
                                                            <div class="col-xs-12">
                                                                <fieldset class="form-group">
                                                                    <label>Otro</label>
                                                                    <div class="input-group">
                                                                            <span class="input-group-addon alignJustifyCenter">
                                                                                <i class="icon-link icon-formulario"></i>
                                                                            </span>
                                                                        <input class="form-control ng-untouched ng-pristine ng-invalid" type="text">
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row modal-footer">
                                                        <div class="col-xs-4">
                                                            <fieldset class="form-group">
                                                                <label>Correo electronico</label>
                                                                <div class="input-group">
                                                                        <span class="input-group-addon alignJustifyCenter">
                                                                            <i class="icon-link icon-formulario"></i>
                                                                        </span>
                                                                    <input type="checkbox">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.campoEmail"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                        <div class="col-xs-4">
                                                            <fieldset class="form-group">
                                                                <label>SMS</label>
                                                                <div class="input-group">
                                                                        <span class="input-group-addon alignJustifyCenter">
                                                                            <i class="icon-link icon-formulario"></i>
                                                                        </span>
                                                                    <input type="checkbox">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.campoSms"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                        <div class="col-xs-4">
                                                            <fieldset class="form-group">
                                                                <label>Ticket</label>
                                                                <div class="input-group">
                                                                        <span class="input-group-addon alignJustifyCenter">
                                                                            <i class="icon-link icon-formulario"></i>
                                                                        </span>
                                                                    <input type="checkbox">
                                                                </div>
                                                                <control-messages [control]="formulario.controls.campoTicket"></control-messages>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="submit" class="btn btn-success" >
                                                            <i class="icon-floppy-disk icoBntModal"></i>&nbsp; Guardar
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                            </app-dialog>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div *ngIf="activateLoading" class="Loading">
    <div class="loader"></div>
</div>